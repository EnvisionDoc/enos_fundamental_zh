# 2019/03/28

EnOS Cloud 2019年3月28日发布了以下新服务、特性及更新：

## 新增服务与功能

### 数据资产管理

#### 流式计算服务

- 多路归并算法模板：支持同一设备上多个测点之间的运算。
  - 按点触发：每条处理策略支持选择一个触发点，当此触发点的数据到来时，触发一次数据计算。
  - 按固定频率触发：每条处理策略按系统时间的固定时间间隔触发，每一次运算时，采用所有测点的最新数据进行运算。
  - 表达式变量自动提示：在表达式中支持组织内所有模型、模型测点、模型属性的自动提示功能。

- 流式计算集群监控：支持用户对流式计算集群资源进行监控；包括集群资源配置情况、使用情况、集群下各任务运行情况等。

更多信息，参见[多路算法归并模板](/docs/data-asset/zh_CN/latest/learn/multi_point_overview.html)。

#### 数据服务API

- `getAssetsLatestData`：获取设备测点设备时间的最新一条数据。
- `getPointsTSDBMetaData`：获取设备测点的TSDB存储策略。

有关API的详细参考信息，登录EnOS控制台并选择**EnOS API > API文档 > Data Service**。

### 设备管理

为了增强EnOS中设备资产的安全，设备管理、模型、资产树配置实施了权限控制，具体信息如下：

#### 用户账户权限控制

- 普通用户默认没有任何权限，只有被OU管理员授予内置权限或自定义权限后，才可以拥有资源创建、删除、编辑、查看的读写权限。
- 管理员默认有所有资源的Full Access权限。

#### 服务账户(SA)权限控制

服务账号（SA）可以按资产和操作两个维度进行授权。

- 从操作维度，服务账户默认没有任何权限，需要在某个OU下对SA进行资源权限授权
  - 如被授予Read Only权限，可以执行读取类API。
  - 如被赋予Full Access权限，则可以执行读取、编辑、新增、删除的读写API。

- 从资产维度，服务账号被按照按资产树的方式授权某一些资产的Read权限后，可以访问这批资产的属性读取API
  - 被授权Control权限后，可以执行这批资产的控制API。
  - 被授权Edit后，可以执行这批资产的属性修改API。

更多信息，参见[策略，角色，与权限](/docs/iam/en/latest/access_policy.html)。

#### CoAP接入协议

- 支持CoAP接入协议：支持NB-IoT设备通过CoAP/UDP协议，以直连的方式接入到EnOS，保证设备低功耗运行的同时，能够实现数据的上下行和全生命周期的设备管理。

#### 新增设备告警API

- 新增以下告警配置查询API：
  - `getAlertSeverity`
  - `getAlertType`
  - `getAlertContent`
  - `getAlertRule`
  - `listAlertSeverities`
  - `listAlertTypes`
  - `listAlertContents`
  - `listAlertRules`
- 新增下列告警内容增加、删除、编辑、查询API：
  - `listActiveAlerts`
  - `listHistoryAlerts`
  - `scrollActiveAlerts`
  - `scrollHistoryAlerts`
  - `insertActiveAlerts`
  - `insertHistoryAlerts`
  - `updateActiveAlertTags`
  - `updateHistoryAlertTags`
  - `closeActiveAlerts`
  - `deleteActiveAlerts`
  - `deleteHistoryAlerts`
  
有关API的详细参考信息，登录EnOS控制台并选择**EnOS API > API文档 > Event Service**。

## 功能改进
  
### 安全
  
#### IAM
  
- 组织信息：支持组织名称变更及组织主账户转移，参见[管理组织信息和组织账户](/docs/iam/zh_CN/latest/system/managing_organization.html)。
- 服务账号：支持对服务账号的授权管理，参见[管理服务账号](/docs/iam/zh_CN/latest/howto/service_account/managing_service_account.html)。
- 策略：支持对用户设置预定义策略，对用户和服务账号设置自定义策略，参见[策略，角色，与权限](/docs/iam/zh_CN/latest/access_policy.html)。
- 安全设置：支持密码强度策略管理，登录IP限制，组织Session有效期设置，参见[设置安全选项](https://www.envisioniot.com/docs/iam/zh_CN/latest/howto/user/managing_security_settings.html)。
- MFA：支持对用户设置多因子认证，参见[启用多因子认证](/docs/iam/zh_CN/latest/howto/user/enabling_multi_factor_auth.html)。
- 角色工程接入：接入配置、资产树、模型管理等接入IAM权限管理，参见[策略，角色，与权限](/docs/iam/zh_CN/latest/access_policy.html)。


#### EnOS API签名算法

签名算法更新为SHA-256。更多信息，参见[API签名算法](/docs/app-development/zh_CN/latest/generating_signature.html)。

### 应用注册与管理

#### 应用注册

应用身份标识由AppID改为应用的accessKey。


### 数据资产管理

#### 数据Open API

以下API调用可查询的(设备数×点数)的值限制增加至3000:
   
- `getAssetsRawDataByTimeRange`
- `getAssetsAIRawData`
- `getAssetsAINormalizedData`
- `getAssetsGenericData`

有关API的详细参考信息，登录EnOS控制台并选择**EnOS API > API文档 > Data Service**。

## 已弃用功能

### 应用开发

- **应用注册**服务中取消了资源注册

